diff --git a/arch/arm/boot/dts/aspeed-bmc-opp-palmetto.dts b/arch/arm/boot/dts/aspeed-bmc-opp-palmetto.dts
index 2f2cb0e..21ede9c 100644
--- a/arch/arm/boot/dts/aspeed-bmc-opp-palmetto.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-opp-palmetto.dts
@@ -14,7 +14,7 @@
 	};
 
 	memory@40000000 {
-		reg = <0x40000000 0x20000000>;
+		reg = <0x40000000 0x10000000>;
 	};
 
 	reserved-memory {
@@ -22,62 +22,46 @@
 		#size-cells = <1>;
 		ranges;
 
-		vga_memory: framebuffer@5f000000 {
+		vga_memory: framebuffer@4f000000 {
 			no-map;
-			reg = <0x5f000000 0x01000000>; /* 16M */
+			reg = <0x4f000000 0x01000000>; /* 16M */
 		};
 
-		coldfire_memory: codefire_memory@5ee00000 {
-			reg = <0x5ee00000 0x00200000>;
+		coldfire_memory: codefire_memory@4ee00000 {
+			reg = <0x4ee00000 0x00200000>;
 			no-map;
 		};
 
-		flash_memory: region@5c000000 {
+		flash_memory: region@4c000000 {
 			no-map;
-			reg = <0x5C000000 0x02000000>; /* 32MB */
+			reg = <0x4C000000 0x02000000>; /* 32MB */
 		};
+
+		gfx_memory: framebuffer@4b000000 {
+			reg = <0x4b000000 0x01000000>;
+		};
+
+		video_engine_memory: jpegbuffer@49000000 {
+			reg = <0x49000000 0x02000000>; 
+		};
+
 	};
 
 	leds {
 		compatible = "gpio-leds";
-
+/*
 		heartbeat {
-			gpios = <&gpio ASPEED_GPIO(R, 4) GPIO_ACTIVE_LOW>;
+			gpios = <&gpio ASPEED_GPIO(D, 5) GPIO_ACTIVE_LOW>;
 		};
 
 		power {
-			gpios = <&gpio ASPEED_GPIO(R, 5) GPIO_ACTIVE_LOW>;
+			gpios = <&gpio ASPEED_GPIO(D, 4) GPIO_ACTIVE_LOW>;
 		};
 
 		identify {
-			gpios = <&gpio ASPEED_GPIO(A, 2) GPIO_ACTIVE_LOW>;
-		};
-	};
-
-	fsi: gpio-fsi {
-		compatible = "aspeed,ast2400-cf-fsi-master", "fsi-master";
-		#address-cells = <2>;
-		#size-cells = <0>;
-
-		memory-region = <&coldfire_memory>;
-		aspeed,sram = <&sram>;
-		aspeed,cvic = <&cvic>;
-
-		clock-gpios = <&gpio ASPEED_GPIO(A, 4) GPIO_ACTIVE_HIGH>;
-		data-gpios = <&gpio ASPEED_GPIO(A, 5) GPIO_ACTIVE_HIGH>;
-		mux-gpios = <&gpio ASPEED_GPIO(A, 6) GPIO_ACTIVE_HIGH>;
-		enable-gpios = <&gpio ASPEED_GPIO(D, 0) GPIO_ACTIVE_HIGH>;
-		trans-gpios = <&gpio ASPEED_GPIO(H, 6) GPIO_ACTIVE_HIGH>;
-	};
-
-	gpio-keys {
-		compatible = "gpio-keys";
-
-		checkstop {
-			label = "checkstop";
-			gpios = <&gpio ASPEED_GPIO(P, 5) GPIO_ACTIVE_LOW>;
-			linux,code = <ASPEED_GPIO(P, 5)>;
+			gpios = <&gpio ASPEED_GPIO(R, 4) GPIO_ACTIVE_LOW>;
 		};
+*/
 	};
 };
 
@@ -141,21 +125,70 @@
 	pinctrl-0 = <&pinctrl_rmii1_default>;
 };
 
-&i2c0 {
+
+
+&gfx {
+     status = "okay";
+     memory-region = <&gfx_memory>;
+};
+
+&video {
+	status = "okay";
+	memory-region = <&video_engine_memory>;
+};
+
+
+&adc {
 	status = "okay";
+};
 
-	eeprom@50 {
-		compatible = "atmel,24c256";
-		reg = <0x50>;
-		pagesize = <64>;
+&pwm_tacho {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_pwm0_default &pinctrl_pwm1_default>;
+
+	fan@0 {
+		reg = <0x00>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x08>;
 	};
 
-	rtc@68 {
-		compatible = "dallas,ds3231";
-		reg = <0x68>;
+	fan@1 {
+		reg = <0x00>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x09>;
+	};
+
+	fan@2 {
+		reg = <0x01>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x0a>;
+	};
+
+	fan@3 {
+		reg = <0x01>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x0b>;
+	};
+
+	fan@4 {
+		reg = <0x00>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x0c>;
+	};
+
+	fan@5 {
+		reg = <0x00>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x0d>;
+	};
+
+	fan@6 {
+		reg = <0x01>;
+		aspeed,fan-tach-ch = /bits/ 8 <0x0e>;
 	};
 };
 
+
+
+&i2c0 {
+	status = "okay";
+};
+
 &i2c1 {
 	status = "okay";
 };
@@ -163,19 +196,22 @@
 &i2c2 {
 	status = "okay";
 
-	tmp423@4c {
-		compatible = "ti,tmp423";
-		reg = <0x4c>;
-	};
 };
 
 &i2c3 {
 	status = "okay";
+	eeprom@56 {
+		compatible = "atmel,24c02";
+		reg = <0x56>;
+		pagesize = <64>;
+	};
 
-	occ-hwmon@50 {
-		compatible = "ibm,p8-occ-hwmon";
-		reg = <0x50>;
+/*
+	rtc@68 {
+		compatible = "dallas,ds3231";
+		reg = <0x68>;
 	};
+*/
 };
 
 &i2c4 {
@@ -183,15 +219,36 @@
 };
 
 &i2c5 {
-	status = "okay";
+	status = "disabled";
 };
 
 &i2c6 {
 	status = "okay";
+
+	tmp75@49 {
+		compatible = "ti,lm75";
+		reg = <0x49>;
+	};
+	tmp75@4e {
+		compatible = "ti,lm75";
+		reg = <0x4e>;
+	};
+	tmp75@4c {
+		compatible = "ti,lm75";
+		reg = <0x4c>;
+	};
+	tmp75@4b {
+		compatible = "ti,lm75";
+		reg = <0x4b>;
+	};
+	tmp421@4f {
+		compatible = "ti,tmp421";
+		reg = <0x4f>;
+	};
 };
 
 &i2c7 {
-	status = "okay";
+	status = "disabled";
 };
 
 &vuart {
@@ -207,171 +264,11 @@
 };
 
 &lpc_ctrl {
+
 	status = "okay";
 	memory-region = <&flash_memory>;
 	flash = <&spi>;
 };
 
-&gpio {
-	pin_func_mode0 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(C, 4) GPIO_ACTIVE_HIGH>;
-		output-low;
-		line-name = "func_mode0";
-	};
-
-	pin_func_mode1 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(C, 5)  GPIO_ACTIVE_HIGH>;
-		output-low;
-		line-name = "func_mode1";
-	};
-
-	pin_func_mode2 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(C, 6) GPIO_ACTIVE_HIGH>;
-		output-low;
-		line-name = "func_mode2";
-	};
-
-	pin_gpio_a0 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(A, 0) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "BMC_FAN_RESERVED_N";
-	};
-
-	pin_gpio_a1 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(A, 1) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "APSS_WDT_N";
-	};
-
-	pin_gpio_b1 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(B, 1) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "APSS_BOOT_MODE";
-	};
-
-	pin_gpio_b2 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(B, 2) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "APSS_RESET_N";
-	};
-
-	pin_gpio_b7 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(B, 7) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "SPIVID_STBY_RESET_N";
-	};
-
-	pin_gpio_d1 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(D, 1) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "BMC_POWER_UP";
-	};
-
-	pin_gpio_f1 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(F, 1) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "BMC_BATTERY_TEST";
-	};
-
-	pin_gpio_f4 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(F, 4) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "AST_HW_FAULT_N";
-	};
-
-	pin_gpio_f5 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(F, 5) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "AST_SYS_FAULT_N";
-	};
-
-	pin_gpio_f7 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(F, 7) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "BMC_FULL_SPEED_N";
-	};
-
-	pin_gpio_g3 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(G, 3) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "BMC_FAN_ERROR_N";
-	};
-
-	pin_gpio_g4 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(G, 4) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "BMC_WDT_RST1_P";
-	};
-
-	pin_gpio_g5 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(G, 5) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "BMC_WDT_RST2_P";
-	};
-
-	pin_gpio_h0 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(H, 0) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "PE_SLOT_TEST_EN_N";
-	};
-
-	pin_gpio_h1 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(H, 1) GPIO_ACTIVE_HIGH>;
-		input;
-		line-name = "BMC_RTCRST_N";
-	};
-
-	pin_gpio_h2 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(H, 2) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "SYS_PWROK_BMC";
-	};
-
-	pin_gpio_h7 {
-		gpio-hog;
-		gpios = <ASPEED_GPIO(H, 7) GPIO_ACTIVE_HIGH>;
-		output-high;
-		line-name = "BMC_TPM_INT_N";
-	};
-};
-
-&fsi {
-	cfam@0,0 {
-		reg = <0 0>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		chip-id = <0>;
 
-		scom@1000 {
-			compatible = "ibm,fsi2pib";
-			reg = <0x1000 0x400>;
-		};
 
-		fsi_hub0: hub@3400 {
-			compatible = "ibm,fsi-master-hub";
-			reg = <0x3400 0x400>;
-			#address-cells = <2>;
-			#size-cells = <0>;
-			no-scan-on-init;
-		};
-	};
-};
diff --git a/arch/arm/boot/dts/aspeed-g4.dtsi b/arch/arm/boot/dts/aspeed-g4.dtsi
index 6011692..6544c37 100644
--- a/arch/arm/boot/dts/aspeed-g4.dtsi
+++ b/arch/arm/boot/dts/aspeed-g4.dtsi
@@ -181,6 +181,16 @@
 				quality = <100>;
 			};
 
+			gfx: display@1e6e6000 {
+				compatible = "aspeed,ast2400-gfx", "syscon";
+				reg = <0x1e6e6000 0x1000>;
+				reg-io-width = <4>;
+				clocks = <&syscon ASPEED_CLK_GATE_D1CLK>;
+				resets = <&syscon ASPEED_RESET_CRT1>;
+				status = "disabled";
+				interrupts = <0x19>;
+			};
+
 			adc: adc@1e6e9000 {
 				compatible = "aspeed,ast2400-adc";
 				reg = <0x1e6e9000 0xb0>;
@@ -190,6 +200,16 @@
 				status = "disabled";
 			};
 
+			video: video@1e700000 {
+				compatible = "aspeed,ast2400-video-engine";
+				reg = <0x1e700000 0x1000>;
+				clocks = <&syscon ASPEED_CLK_GATE_VCLK>,
+					 <&syscon ASPEED_CLK_GATE_ECLK>;
+				clock-names = "vclk", "eclk";
+				interrupts = <7>;
+				status = "disabled";
+			};
+
 			sram: sram@1e720000 {
 				compatible = "mmio-sram";
 				reg = <0x1e720000 0x8000>;	// 32K
diff --git a/drivers/media/platform/aspeed-video.c b/drivers/media/platform/aspeed-video.c
index 1bb863b..b783f18 100644
--- a/drivers/media/platform/aspeed-video.c
+++ b/drivers/media/platform/aspeed-video.c
@@ -748,6 +748,10 @@ static void aspeed_video_get_resolution(struct aspeed_video *video)
 					    VE_MAX_SRC_BUFFER_SIZE)) {
 			dev_err(video->dev,
 				"Failed to allocate source buffers\n");
+			dev_err(video->dev, "srcs[0].size %d; srcs[0].dma %d, srcs[0].virt 0x%p\n", 
+				video->srcs[0].size,
+				video->srcs[0].dma,
+				video->srcs[0].virt);
 			return;
 		}
 	}
@@ -897,7 +901,7 @@ static void aspeed_video_set_resolution(struct aspeed_video *video)
 	return;
 
 err_mem:
-	dev_err(video->dev, "Failed to allocate source buffers\n");
+	dev_err(video->dev, "Failed to allocate source buffers (set_resolution)\n");
 
 	if (video->srcs[0].size)
 		aspeed_video_free_buf(video, &video->srcs[0]);
